name: release and push to central
on:
  push:
    tags:
      - '*'
jobs:
  publish:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      packages: write
    steps:
      - uses: actions/checkout@v3
      - name: Set up Java for publishing to Maven Central Repository
        uses: actions/setup-java@v3
        with:
          java-version: 17
          distribution: 'temurin'
          settings-path: ${{ github.workspace }} # location for the settings.xml file
          server-id: ossrh
          server-username: ${{ secrets.OSSRH_USERNAME }}
          server-password: ${{ secrets.OSSRH_TOKEN }}
          gpg-private-key: ${{ secrets.OSSRH_GPG_SECRET_KEY_ORIGINAL }}
          gpg-passphrase: ${{ secrets.OSSRH_GPG_SECRET_KEY_PASSWORD }}
      - name: Publish to the Maven Central Repository
        env:
          #          staging
          ORG_GRADLE_PROJECT_stagingUsername: ${{ secrets.OSSRH_USERNAME }}
          ORG_GRADLE_PROJECT_stagingPassword: ${{ secrets.OSSRH_TOKEN }}
#          TODO: keyId can move to env var
          signingKeyId: 3EE3EB8A
#          signingKey: ${{ secrets.OSSRH_GPG_SECRET_KEY }}
#          signingKeyPassword: ${{ secrets.OSSRH_GPG_SECRET_KEY_PASSWORD }}
          signingKey: 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
          signingKeyPassword: OvY8kwLK6ubqQUY
        uses: gradle/gradle-build-action@bd5760595778326ba7f1441bcf7e88b49de61a25 # v2.6.0
        with:
          arguments: assemble publish --info
